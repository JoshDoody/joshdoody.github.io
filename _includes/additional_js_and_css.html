		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<!--link rel="stylesheet" href="{{ site.baseurl }}/css/jquery.modal.css"-->
		{% for css_name in page.extra_css %}
		<link rel="stylesheet" href="{{ site.baseurl }}/css/{{ css_name }}">
		{% endfor %}

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<!--script src="{{ site.baseurl }}/js/jquery.cookie.js" type="text/javascript"></script-->
		<!--script src="{{ site.baseurl }}/js/jquery.modal.js" type="text/javascript"></script-->
		<script src="{{ site.baseurl }}/js/app.js"  type="text/javascript"></script>
		<script src="{{ site.baseurl }}/js/drip_pro.js" type="text/javascript"></script>
		<!--script src="{{ site.baseurl }}/js/destination.js" type="text/javascript"></script-->
		<!-- Drip -->
		<script type="text/javascript">
		  var _dcq = _dcq || [];
		  var _dcs = _dcs || {}; 
		  _dcs.account = '6019475';

		  (function() {
		    var dc = document.createElement('script');
		    dc.type = 'text/javascript'; dc.async = true; 
		    dc.src = '//tag.getdrip.com/6019475.js';
		    var s = document.getElementsByTagName('script')[0];
		    s.parentNode.insertBefore(dc, s);
		  })();
		</script>
			
		<script type="text/javascript">
			window._drip_pro = new DripPro
			
			window.drip_plinko = function(drip, page) {
				var response = {}
				var context = '{{ page.context }}'
				
				if (drip.is_anon) {
					if (context == 'raise') {
						response = {
							offer: 'salary-mistakes-course',
							footer: [drip.file('salary-mistakes-course-footer'), 'footer', { offer: 'salary-mistakes-course' }]
						}
					} else if (context == 'negotiate') {
						response = {
							offer: 'salary-negotiation-templates',
							footer: [drip.file('salary-negotiation-templates-footer'), 'footer', { offer: 'salary-negotiation-templates' }]
						}	
					} else if (context == 'interview') {
						response = {
							offer: 'tics',
							footer: [drip.file('tics-footer'), 'footer', { offer: 'tics' }]
						}
					}
				}
								
				return response
			}
			
			window.survey_plinko = function(drip) {
				
			}
			
			window.drip_replacements = {
				
			}
			
      jQuery(function(){
        window._drip_pro.init({
          debug: false,
          template_path: '/ads/',
          survey_trigger: function() {
            return true // If a question is available, should the survey widget be triggered?
          },
          can_display: function(intent, options) {
            return true // Given the "intent" (like modal), should we show it on this page? Useful for checking to see if you're on the checkout page, etc. and forcing DPT offers to not show.
          },
          pre_init: function() {
            this.settings.track = this.settings.track.bind(this)
            // this.settings.score = this.settings.score.bind(this)
            // this.settings.increment_score = this.settings.increment_score.bind(this)
            // this.settings.content_leaderboard = this.settings.content_leaderboard.bind(this)
          },
          post_drip_response: function(payload) {
            this.settings.track()
						if(this.is_anon) {
							console.log("Anonymous");
							$('[data-offer-plinko="optional"]').show();
							$('head').append('<style type="text/css">.drip-lightbox-wrapper { display: block; }</style>');
						}
            // this.settings.score()
            //
            // $.each(this.custom_fields(), function(key, value) {
            //   $('table').append(
            //     $('<tr>').append(
            //       $('<th>').text(key),
            //       $('<td>').text(value)
            //     )
            //   )
            // })
          },
          score: function(drip) {
            // var t = this
            // $('.category-name a').each(function() {
            //   var tag_name = $(this).text()
            //   tag_name = tag_name.toLowerCase().replace(/ /g, '_')
            //   t.settings.increment_score(tag_name, "12345")
            // })
          },
          increment_score: function(category, article_id) {
            // var posts_cache_count = 30
            // if (!article_id) return
            // var category_posts = (this.custom_fields()[category] || '').split(',')
            // category_posts.push(article_id)
            // this.add_custom_field(category, _.uniq(_.filter(category_posts)).join(','))
            // var recent_posts = (this.custom_fields()['recent_posts'] || '').split(',')
            // var o = {} ; o[category] = article_id
            // recent_posts.push(JSON.stringify(o))
            // this.add_custom_field('recent_posts', _.last(_.uniq(_.filter(recent_posts)), posts_cache_count).join(','))
          },
          content_leaderboard: function() {
            // var recent_posts = (this.custom_fields()['recent_posts'] || '').split(',')
            // recent_posts = _.map(_.filter(recent_posts), JSON.parse)
            // total_posts = recent_posts.length
            // var posts_summary = {}
            // _.each(recent_posts, function(tuple) {
            //   var key = _.keys(tuple)[0]
            //   var value = tuple[key]
            //   posts_summary[key] = posts_summary[key] || []
            //   posts_summary[key].push(value)
            // })
            // _.each(posts_summary, function(value, key) {
            //   percent = value.length / total_posts
            //   posts_summary[key] = percent
            // })
            // var posts_ranked = _.sortBy(_.pairs(posts_summary), function(arr) {
            //   return arr[1]
            // }).reverse()
            // return posts_ranked
          },
          track: function() {
            var traits = { anon: true }
            if (!this.is_anon) {
              traits = {
                anon: false,
                email: this.drip_contact.email,
                firstName: this.custom_fields()['MS_FNAME'],
                lastName: this.custom_fields()['MS_LNAME']
              }
              $.each(this.tags(), function(idx, key) {
                traits[key] = true
              })
            }

            traits = $.extend(traits, this.custom_fields())

						var pageName = document.title.replace(' | Fearless Salary Negotiation','').replace(' | Get Your Next Raise','')

            if (pageName.length) {
              this.add_tag('Read - ' + pageName)
							console.log("Tags: " + this.tags())
            }
          },
          survey_widget: function(survey, drip) {

          },
          renderers: {
					  footer: function(intent, content, options) {
					      var os = jQuery.extend({
					          threshold: 40
					      }, options)
					      if (this.dom_slider)
					          this.dom_slider.remove()
					      var dom = jQuery(content)
					      this.dom_slider = dom
					      jQuery('body').append(dom)
					      var has_scrolled = false
					      jQuery(window).scroll(function() {
					          var scroll_speed = 800;
					          var wintop = jQuery(window).scrollTop(),
					              docheight = jQuery(document).height(),
					              winheight = jQuery(window).height()
					          scrolled = ((wintop / (docheight - winheight)) * 100)
					          if ((docheight - wintop) < 900) {
					              dom.removeClass('expanded')
					          } else if (scrolled > os.threshold) {
					              if (!has_scrolled) {
					                  this.debug('Displaying slider')
					                  has_scrolled = true
					                  $(document).trigger('dpt:slide', [new this.fn_helper(this), this])
														switch (options.offer) {
														  case 'salary-mistakes-course':
																ga('send', {
																	hitType: 'event',
																	eventCategory: 'Slider',
																	eventAction: 'Show ad',
																	eventLabel: 'Salary Mistakes Course'
																});
																break
														  case 'salary-negotiation-templates':
																ga('send', {
																	hitType: 'event',
																	eventCategory: 'Slider',
																	eventAction: 'Show ad',
																	eventLabel: 'Salary Negotiation Templates'
																});
																break
														  case 'tics':
																ga('send', {
																	hitType: 'event',
																	eventCategory: 'Slider',
																	eventAction: 'Show ad',
																	eventLabel: 'Interview Cheat Sheet'
																});
																break
														}
					              }
					              dom.addClass('expanded')
					          }
					      }.bind(this))
					  }
          }
        })
      })
		</script>
			
		<script type="text/javascript">
			// function to be called when we want to know about the dripUser for DOM manipulation
			var dripSetup = {
			  init: function(successHandler) {
			    if (window.dripUser) {
			        successHandler(window.dripUser);
			return;
			    }
			    _dcq.push(['identify', {
			      success: function(payload) {
			        var dripUser = {
			          rawDripContact: payload,
			          isAnon: payload.anonymous
			        };
			        window.dripUser = dripUser;
			        successHandler(dripUser);
			      }
			    }]);
			  }
			};
			
			// Wait until the DOM is ready and append the buyer's email (from Drip) to buy buttons
			$(function() {
				var drip_user = function(dripUser) {
		
					if(!dripUser.isAnon) {
						$("a.sendowl-button").attr('href', function(i, h) {
								var drip_email = encodeURIComponent(dripUser.rawDripContact.email)
						    return h + (h.indexOf('?') != -1 ? "&buyer_email="+drip_email : "?buyer_email="+drip_email);
						});
					}
				};
	
				dripSetup.init(drip_user);
			});
		</script>
	
		<script type="text/javascript" src="https://transactions.sendowl.com/assets/sendowl.js" ></script>
		{% for js_name in page.extra_js %}
		<script src="{{ site.baseurl }}/js/{{ js_name }}" type="text/javascript"></script>
		{% endfor %}